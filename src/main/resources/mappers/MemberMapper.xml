<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="member">
	<!-- login -->
	<select id="selectMemberLogin" parameterType="com.daesungra.domain.MemberVo" resultType="com.daesungra.domain.MemberVo">
		SELECT userId, userName from DMEMBER WHERE userId = #{userId} and userPwd = #{userPwd}
	</select>
	<select id="selectSalt" parameterType="String" resultType="String">
		SELECT saltData from DMEMBER_SALT WHERE userId = #{userId}
	</select>
	<!-- join -->
	<select id="idChk" parameterType="String" resultType="String">
		SELECT userId FROM DMEMBER WHERE userId = #{userId}
	</select>
	<insert id="memberInsert" parameterType="com.daesungra.domain.MemberVo">
		INSERT INTO DMEMBER (userId, userPwd, userName, email, phone, postal, address, addressAdd, photo, photoOri, mDate, isDelete)
			VALUES (#{userId}, #{userPwd}, #{userName}, #{email}, #{phone}, #{postal}, #{address}, #{addressAdd}, #{photo}, #{photoOri}, SYSDATE, 0)
	</insert>
	<insert id="saltInsert" parameterType="com.daesungra.domain.MemberSaltVo">
		INSERT INTO DMEMBER_SALT VALUES (#{userId}, #{saltData})
	</insert>
	<!-- member view (info, profile) -->
	<select id="selectMemberView" parameterType="String" resultType="com.daesungra.domain.MemberVo">
		SELECT userId, userName, email, phone, postal, address, addressAdd, photo, photoOri, mDate
			FROM DMEMBER
			WHERE userId = #{userId} and isDelete = 0
	</select>
</mapper>